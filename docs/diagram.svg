<?xml version="1.0" encoding="utf-8" standalone="no"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 20010904//EN" "http://www.w3.org/TR/2001/REC-SVG-20010904/DTD/svg10.dtd"><svg xmlns="http://www.w3.org/2000/svg" width="778" height="677" xmlns:xlink="http://www.w3.org/1999/xlink"><source><![CDATA[kubecsr->KubeApiserver: Get services SAN
Note over kubecsr: Generate:\n* Private Key\n* CSR
kubecsr->KubeApiserver: Submit csr
Note over KubeApiserver: Pending
kubecsr->KubeApiserver: Approve csr
Note over KubeApiserver: Approved
KubeControllerManager-->KubeApiserver: Issue certificate
Note over KubeApiserver: Approved,Issued
kubecsr->KubeApiserver: Fetch certificate
Note left of kubecsr: The csr is annotate as\n*Fetched* if not deleted
kubecsr->KubeApiserver: Delete csr]]></source><desc></desc><defs><marker viewBox="0 0 5 5" markerWidth="5" markerHeight="5" orient="auto" refX="5" refY="2.5" id="markerArrowBlock"><path d="M 0 0 L 5 2.5 L 0 5 z"></path></marker><marker viewBox="0 0 9.6 16" markerWidth="4" markerHeight="16" orient="auto" refX="9.6" refY="8" id="markerArrowOpen"><path d="M 9.6,8 1.92,16 0,13.7 5.76,8 0,2.286 1.92,0 9.6,8 z"></path></marker></defs><g class="title"></g><g class="actor"><path d="M215.5859375,20C264.3,23.5 289.6,16.5 303.7,20.0C302.0,46.7 305.4,44.3 303.7,62.3C229.7,58.8 253.6,65.8 215.6,62.3C213.9,38.9 217.3,47.9 215.6,20.0" stroke="#000000" fill="#ffffff" style="stroke-width: 2;"></path><text x="226.1484375" y="46" style="font-size: 16px; font-family: danielbd;"><tspan x="225.5859375">kubecsr</tspan></text></g><g class="actor"><path d="M215.5859375,614.96875C229.7,618.5 236.7,611.4 303.7,615.0C305.4,633.6 302.0,647.1 303.7,657.3C262.2,660.8 229.7,653.7 215.6,657.3C217.3,650.5 213.9,647.1 215.6,615.0" stroke="#000000" fill="#ffffff" style="stroke-width: 2;"></path><text x="226.1484375" y="640.96875" style="font-size: 16px; font-family: danielbd;"><tspan x="225.5859375">kubecsr</tspan></text></g><path d="M259.6,62.3C237.5,275.2 281.7,447.2 259.6,615.0" stroke="#000000" fill="none" style="stroke-width: 2;"></path><g class="actor"><path d="M362.359375,20C473.0,14.2 450.0,25.8 507.1,20.0C505.4,52.1 508.8,55.5 507.1,62.3C458.8,68.1 455.3,56.5 362.4,62.3C364.1,52.1 360.7,48.2 362.4,20.0" stroke="#000000" fill="#ffffff" style="stroke-width: 2;"></path><text x="372.921875" y="44.2734375" style="font-size: 16px; font-family: danielbd;"><tspan x="372.359375">KubeApiserver</tspan></text></g><g class="actor"><path d="M362.359375,614.96875C416.1,609.2 385.5,620.8 507.1,615.0C505.4,632.5 508.8,647.1 507.1,657.3C472.4,651.5 397.1,663.0 362.4,657.3C360.7,650.5 364.1,633.2 362.4,615.0" stroke="#000000" fill="#ffffff" style="stroke-width: 2;"></path><text x="372.921875" y="639.2421875" style="font-size: 16px; font-family: danielbd;"><tspan x="372.359375">KubeApiserver</tspan></text></g><path d="M434.8,62.3C412.6,464.4 456.9,482.3 434.8,615.0" stroke="#000000" fill="none" style="stroke-width: 2;"></path><g class="actor"><path d="M527.140625,20C659.2,28.9 713.3,11.1 748.7,20.0C750.4,44.4 747.0,55.5 748.7,62.3C580.3,71.1 587.4,53.4 527.1,62.3C528.8,34.4 525.4,55.5 527.1,20.0" stroke="#000000" fill="#ffffff" style="stroke-width: 2;"></path><text x="537.703125" y="43.703125" style="font-size: 16px; font-family: danielbd;"><tspan x="537.140625">KubeControllerManager</tspan></text></g><g class="actor"><path d="M527.140625,614.96875C580.3,606.1 643.4,623.8 748.7,615.0C750.4,640.9 747.0,645.5 748.7,657.3C618.6,666.1 695.6,648.4 527.1,657.3C525.4,625.7 528.8,646.8 527.1,615.0" stroke="#000000" fill="#ffffff" style="stroke-width: 2;"></path><text x="537.703125" y="638.671875" style="font-size: 16px; font-family: danielbd;"><tspan x="537.140625">KubeControllerManager</tspan></text></g><path d="M637.9,62.3C660.0,464.4 615.8,526.5 637.9,615.0" stroke="#000000" fill="none" style="stroke-width: 2;"></path><g class="signal"><text x="270.203125" y="92.4140625" style="font-size: 16px; font-family: danielbd;"><tspan x="269.640625">Get services SAN</tspan></text><path d="M259.6,99.4C287.7,106.4 301.7,92.4 434.8,99.4" stroke="#000000" fill="none" style="stroke-width: 2; marker-end: url(&quot;#markerArrowBlock&quot;);"></path></g><g class="note"><path d="M197.203125,119.421875C217.2,114.4 231.0,124.4 322.1,119.4C324.7,168.8 319.5,174.0 322.1,184.4C278.2,179.4 258.4,189.4 197.2,184.4C194.6,163.4 199.8,129.8 197.2,119.4" stroke="#000000" fill="#ffffff" style="stroke-width: 2;"></path><text x="202.765625" y="137.5625" style="font-size: 16px; font-family: danielbd;"><tspan x="202.203125">Generate:</tspan><tspan dy="1.2em" x="202.203125">* Private Key</tspan><tspan dy="1.2em" x="202.203125">* CSR</tspan></text></g><g class="signal"><text x="299.828125" y="214.25" style="font-size: 16px; font-family: danielbd;"><tspan x="298.6875">Submit csr</tspan></text><path d="M259.6,221.0C301.7,213.9 392.7,228.0 434.8,221.0" stroke="#000000" fill="none" style="stroke-width: 2; marker-end: url(&quot;#markerArrowBlock&quot;);"></path></g><g class="note"><path d="M399.2578125,240.953125C430.3,243.8 448.8,238.1 470.2,241.0C471.5,251.7 469.0,266.3 470.2,273.2C448.3,276.1 418.5,270.4 399.3,273.2C400.5,268.1 398.0,265.5 399.3,241.0" stroke="#000000" fill="#ffffff" style="stroke-width: 2;"></path><text x="404.8203125" y="259.65625" style="font-size: 16px; font-family: danielbd;"><tspan x="404.2578125">Pending</tspan></text></g><g class="signal"><text x="292.8125" y="301.3671875" style="font-size: 16px; font-family: danielbd;"><tspan x="292.25">Approve csr</tspan></text><path d="M259.6,314.4C365.7,307.4 392.7,321.4 434.8,314.4" stroke="#000000" fill="none" style="stroke-width: 2; marker-end: url(&quot;#markerArrowBlock&quot;);"></path></g><g class="note"><path d="M387,334.375C448.0,330.6 440.6,338.2 482.5,334.4C483.7,352.0 481.3,341.1 482.5,365.5C432.6,361.7 435.0,369.3 387.0,365.5C388.2,349.0 385.8,356.4 387.0,334.4" stroke="#000000" fill="#ffffff" style="stroke-width: 2;"></path><text x="392.5625" y="353.078125" style="font-size: 16px; font-family: danielbd;"><tspan x="392">Approved</tspan></text></g><g class="signal"><text x="469.171875" y="395.375" style="font-size: 16px; font-family: danielbd;"><tspan x="468.609375">Issue certificate</tspan></text><path d="M637.9,402.1C520.0,410.2 605.4,394.0 434.8,402.1" stroke="#000000" fill="none" style="stroke-width: 2; stroke-dasharray: 6, 2; marker-end: url(&quot;#markerArrowBlock&quot;);"></path></g><g class="note"><path d="M359.3671875,422.078125C473.9,416.0 443.0,428.1 510.1,422.1C508.9,448.1 511.4,431.3 510.1,453.2C454.3,447.2 383.5,459.2 359.4,453.2C358.1,435.7 360.6,434.7 359.4,422.1" stroke="#000000" fill="#ffffff" style="stroke-width: 2;"></path><text x="364.9296875" y="440.78125" style="font-size: 16px; font-family: danielbd;"><tspan x="364.3671875">Approved,Issued</tspan></text></g><g class="signal"><text x="276.0390625" y="483.6484375" style="font-size: 16px; font-family: danielbd;"><tspan x="275.4765625">Fetch certificate</tspan></text><path d="M259.6,490.9C386.7,497.9 332.9,483.9 434.8,490.9" stroke="#000000" fill="none" style="stroke-width: 2; marker-end: url(&quot;#markerArrowBlock&quot;);"></path></g><g class="note"><path d="M20,510.921875C84.9,519.7 74.1,502.1 239.6,510.9C237.8,539.3 241.5,518.4 239.6,557.8C143.4,549.0 188.3,566.6 20.0,557.8C21.9,546.6 18.1,522.2 20.0,510.9" stroke="#000000" fill="#ffffff" style="stroke-width: 2;"></path><text x="25.5625" y="530.203125" style="font-size: 16px; font-family: danielbd;"><tspan x="25">The csr is annotate as</tspan><tspan dy="1.2em" x="25">*Fetched* if not deleted</tspan></text></g><g class="signal"><text x="302" y="587.9609375" style="font-size: 16px; font-family: danielbd;"><tspan x="301.4375">Delete csr</tspan></text><path d="M259.6,595.0C392.7,588.0 319.0,602.0 434.8,595.0" stroke="#000000" fill="none" style="stroke-width: 2; marker-end: url(&quot;#markerArrowBlock&quot;);"></path></g></svg>